<!DOCTYPE html>
<html lang="pt-pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MYC.com</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <!-- NGL Viewer -->
    <script src="https://unpkg.com/ngl@latest/dist/ngl.js"></script>
    <!-- Link para o arquivo CSS -->
    <link rel="stylesheet" href="style.css"> <!-- Certifica-te que o nome do ficheiro CSS está correto -->
</head>

<body>
    <!-- Header & Navegação -->
    <header>
        <div class="container">
            <nav>
                <a href="#" class="logo">MYC<span>.com</span></a>
                <div class="menu-toggle">☰</div>
                <ul class="nav-links">
                    <li><a href="#inicio">MYC</a></li>
                    <li><a href="#MYC2YOU">MYC2YOU</a></li>
                    <li><a href="#visualizador">Visualizador 3D</a></li>
                    <li><a href="#contato">Contato</a></li> <!-- Ajusta se não houver seção de contato -->
                </ul>
            </nav>
        </div>
    </header>

    <!-- Seção Hero -->
    <section class="hero" id="inicio">
        <div class="container">
            <div class="hero-content">
                <h1>Visualizador da <span style="color: var(--secondary);">Proteína c-MYC</span></h1>
                <p>Explore a estrutura tridimensional da proteína MYC (1NKP) com nosso visualizador molecular interativo.</p>
                <a href="#visualizador" class="btn">Explorar estrutura</a>
                <a href="#MYC2YOU" class="btn btn-secondary" style="margin-left: 15px;">Converse com MYC2YOU</a>
            </div>
        </div>
        <div class="hero-shape"></div>
    </section>

    <!-- Seção Chatbot -->
    <section class="section chatbot" id="MYC2YOU">
        <div class="container">
            <div class="section-header">
                <h2>MYC2YOU</h2>
                <p>Pergunte ao nosso assistente virtual sobre o gene MYC</p>
            </div>
            <!-- Container do Chatbot -->
            <div id="chatbot-container">
                <!-- Área de Mensagens -->
                <div id="chat-log">
                    <!-- As mensagens do chat aparecem aqui -->
                </div>

                <!-- Botões de Ação Rápida (Adicionado) -->
                <div id="quick-actions-myc">
                    <button class="quick-action-button-myc" data-action="função">Função</button>
                    <button class="quick-action-button-myc" data-action="Cancro">Cancro</button>
                    <button class="quick-action-button-myc" data-action="estrutura 3d">Estrutura 3D</button>
                    <button class="quick-action-button-myc" data-action="sequencia">Sequência</button>
                    <button class="quick-action-button-myc" data-action="descoberta">Descoberta</button>
                    <button class="quick-action-button-myc" data-action="terapia">Terapia</button>
                </div>

                <!-- Área de Input -->
                <div id="chat-input">
                    <input type="text" id="user-input" placeholder="Escreva a sua pergunta sobre MYC..." autocomplete="off">
                    <button id="send-button">Enviar</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Seção Visualizador -->
    <section class="section visualizer" id="visualizador">
        <div class="container">
            <div class="section-header">
                <h2>Visualizador Interativo</h2>
                <p>Explore a estrutura molecular da proteína MYC (1NKP) em 3D.</p>
            </div>
            <div class="visualizer-container">
                <div class="visualizer-header">
                    <h3>Estrutura da Proteína MYC - 1NKP</h3>
                    <p>Visualizador baseado em NGL Viewer</p>
                </div>
                <!-- Quick Controls -->
                <div class="quick-controls">
                     <h4>Controles de visualização:</h4>
                    <div class="control-buttons">
                        <button class="control-button" id="cartoon-view">
                            <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2"
                                fill="none">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                            </svg>
                            Cartoon
                        </button>
                        <button class="control-button" id="surface-view">
                            <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2"
                                fill="none">
                                <circle cx="12" cy="12" r="10"></circle>
                            </svg>
                            Superfície
                        </button>
                        <button class="control-button" id="ball-stick-view">
                            <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2"
                                fill="none">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path
                                    d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                                </path>
                            </svg>
                            Bolas/Bastões
                        </button>
                        <button class="control-button" id="reset-view">
                            <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2"
                                fill="none">
                                <path d="M23 4v6h-6"></path>
                                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
                            </svg>
                            Resetar Visão
                        </button>
                    </div>
                </div>
                <!-- Viewer Window -->
                <div class="viewer-window" id="ngl-viewer"></div>
            </div>

            <!-- Info Panels -->
            <div class="info-panels" id="sobre">
                <!-- ... (conteúdo dos painéis de informação mantido) ... -->
                 <div class="info-panel">
                    <h3>
                        <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2"
                            fill="none">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="16" x2="12" y2="12"></line>
                            <line x1="12" y1="8" x2="12.01" y2="8"></line>
                        </svg>
                        Sobre a Proteína MYC
                    </h3>
                    <p>A proteína MYC é um fator de transcrição que regula a expressão de muitos genes. Está envolvida em
                        processos celulares cruciais como crescimento, proliferação e apoptose. Mutações ou desregulação da
                        MYC estão associadas a diversos tipos de cânceres humanos.</p>
                </div>
                <div class="info-panel">
                    <h3>
                        <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2"
                            fill="none">
                            <path d="M22 12h-4l-3 9L9 3l-3 9H2"></path>
                        </svg>
                        Estrutura 1NKP
                    </h3>
                    <p>O código PDB 1NKP representa a estrutura cristalográfica do complexo MYC-MAX ligado ao DNA. Este
                        complexo forma um dímero do tipo básico-hélice-alça-hélice (bHLH) que se liga a sequências específicas
                        de DNA chamadas E-boxes (CACGTG).</p>
                </div>
                <div class="info-panel">
                    <h3>
                        <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2"
                            fill="none">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path
                                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                                </path>
                            </svg>
                            Como Usar o Visualizador
                        </h3>
                    <p>Use os controles para alternar entre diferentes representações da estrutura. Para navegar: arraste para
                        girar, use a roda do mouse para zoom, e shift+clique para mover.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
         <!-- ... (conteúdo do footer mantido) ... -->
         <div class="container">
            <div class="footer-content">
                <div class="footer-about">
                    <a href="#" class="footer-logo">MYC<span>.com</span></a> <!-- Ajustado o nome aqui -->
                    <p>Uma ferramenta interativa para explorar o gene MYC, sua estrutura proteica e obter informações através do chatbot MYC2YOU.</p>
                    <div class="social-links">
                        <!-- Adiciona links reais se aplicável -->
                        <a href="#" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a>
                        <a href="#" aria-label="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg></a>
                    </div>
                </div>
                <div class="footer-links">
                    <h3>Links Rápidos</h3>
                    <ul>
                        <li><a href="#inicio">Início</a></li>
                         <li><a href="#MYC2YOU">MYC2YOU</a></li>
                        <li><a href="#visualizador">Visualizador 3D</a></li>
                        <!-- <li><a href="#contato">Contato</a></li> -->
                    </ul>
                </div>
                <div class="footer-newsletter">
                    <h3>Inscreva-se</h3>
                    <p>Receba atualizações (funcionalidade simulada).</p>
                    <form class="newsletter-form" onsubmit="alert('Inscrição simulada!'); return false;">
                        <input type="email" placeholder="Seu email" required>
                        <button type="submit">Enviar</button>
                    </form>
                </div>
            </div>
            <div class="footer-bottom">
                <p>© 2024 MYC.com | Projeto Académico. Todos os direitos reservados.</p> <!-- Atualizado o ano e texto -->
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // --- Script do Menu Mobile ---
        const menuToggle = document.querySelector('.menu-toggle');
        const navLinks = document.querySelector('.nav-links');
        if (menuToggle && navLinks) {
            menuToggle.addEventListener('click', () => {
                navLinks.classList.toggle('active');
            });
             // Fecha o menu ao clicar num link (útil em mobile)
            navLinks.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    if (navLinks.classList.contains('active')) {
                         navLinks.classList.remove('active');
                    }
                });
            });
        }

        // --- Script do NGL Viewer ---
        try {
            const stage = new NGL.Stage("ngl-viewer", {
                backgroundColor: "white"
            });
            let componentNGL; // Renomeado para evitar conflito de nome

            // Ajusta o tamanho ao redimensionar
            window.addEventListener("resize", function() {
                stage.handleResize();
            });

            // Carrega a estrutura PDB
            stage.loadFile("rcsb://1NKP").then(function(loadedComponent) { // Usando rcsb:// para simplificar
                componentNGL = loadedComponent;
                // Representação inicial
                componentNGL.addRepresentation("cartoon", {
                    color: "chainindex" // Cor por cadeia funciona bem para Myc/Max/DNA
                });
                componentNGL.autoView();
            }).catch(error => {
                console.error("Erro ao carregar PDB com NGL:", error);
                const viewerDiv = document.getElementById("ngl-viewer");
                if(viewerDiv) viewerDiv.innerHTML = "<p style='padding:20px; color: red;'>Erro ao carregar visualizador 3D. Verifique a consola.</p>";
            });

            // Botões de controle do NGL
            document.getElementById("cartoon-view")?.addEventListener("click", function() {
                if (componentNGL) {
                    componentNGL.removeAllRepresentations();
                    componentNGL.addRepresentation("cartoon", { color: "chainindex" });
                }
            });

            document.getElementById("surface-view")?.addEventListener("click", function() {
                if (componentNGL) {
                    componentNGL.removeAllRepresentations();
                    componentNGL.addRepresentation("surface", {
                        //opacity: 0.7, // Opacidade pode dificultar ver o interior
                        colorScheme: "chainindex" // Ou 'electrostatic' se preferir
                    });
                }
            });

            document.getElementById("ball-stick-view")?.addEventListener("click", function() {
                if (componentNGL) {
                    componentNGL.removeAllRepresentations();
                    componentNGL.addRepresentation("ball+stick", { color: "element" });
                }
            });

            document.getElementById("reset-view")?.addEventListener("click", function() {
                if (componentNGL) {
                    componentNGL.autoView();
                }
            });
        } catch (e) {
             console.error("Erro ao inicializar NGL ou seus controles:", e);
             const viewerDiv = document.getElementById("ngl-viewer");
             if(viewerDiv) viewerDiv.innerHTML = "<p style='padding:20px; color: red;'>Erro ao carregar visualizador 3D.</p>";
        }

    </script>

    <!-- ********************************************** -->
    <!-- REMOVIDO o script <script> que fazia o fetch   -->
    <!-- ********************************************** -->

    <!-- Link para o arquivo JavaScript DO CHATBOT (Colocar no final) -->
    <script src="chatbot.js"></script> <!-- Certifica-te que este ficheiro existe e está correto -->

    <!-- Script JS geral (se houver mais, pode ficar aqui ou num ficheiro separado como script.js) -->
    <!-- <script src="script.js"></script> -->

</body>
</html>
